!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"function"==typeof require?e(require("jquery")):e(jQuery)}(function(e){"use strict";var t={escapeRegExChars:function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t},highlight:function(e,s){if(dgwt_wcas.is_premium){var o,n=s.split(/ /);if(n)for(n=n.sort(function(e,t){return t.length-e.length}),o=0;o<n.length;o++)if(n[o]&&n[o].length>1){var a="("+t.escapeRegExChars(n[o].trim())+")";e=e.replace(new RegExp(a,"gi"),"<strong>$1</strong>")}}else a="("+t.escapeRegExChars(s)+")",e=e.replace(new RegExp(a,"gi"),"<strong>$1</strong>");return e}},s=27,o=9,n=13,a=38,i=39,l=40;function r(t,s){var o=e.noop,n=this,a={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,onMouseOver:null,onMouseLeave:null,width:"auto",containerDetailsWidth:"auto",showDetailsPanel:!1,showImage:!1,showPrice:!1,showSKU:!1,showDescription:!1,showSaleBadge:!1,showFeaturedBadge:!1,saleBadgeText:"sale",featuredBadgeText:"featured",minChars:3,maxHeight:600,deferRequestBy:0,params:{},formatResult:r.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,isRtl:!1,onSearchStart:o,onSearchComplete:o,onSearchError:o,preserveInput:!1,searchFormClass:"dgwt-wcas-search-wrapp",containerClass:"dgwt-wcas-suggestions-wrapp",containerDetailsClass:"dgwt-wcas-details-wrapp",searchInputClass:"dgwt-wcas-search-input",preloaderClass:"dgwt-wcas-preloader",closeTrigger:"dgwt-wcas-close",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,isPremium:!1,preventBadQueries:!0,lookupFilter:function(e,t,s){return-1!==e.value.toLowerCase().indexOf(s)},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1,positionFixed:!1};n.element=t,n.el=e(t),n.suggestions=[],n.badQueries=[],n.selectedIndex=-1,n.currentValue=n.element.value,n.intervalId=0,n.cachedResponse={},n.cachedDetails={},n.detailsRequestsSent=[],n.onChangeInterval=null,n.onChange=null,n.isLocal=!1,n.suggestionsContainer=null,n.detailsContainer=null,n.noSuggestionsContainer=null,n.options=e.extend({},a,s),n.classes={selected:"dgwt-wcas-suggestion-selected",suggestion:"dgwt-wcas-suggestion",suggestionsContainerOrientTop:"dgwt-wcas-suggestions-wrapp--top"},n.hint=null,n.hintValue="",n.selection=null,n.initialize(),n.setOptions(s)}r.utils=t,e.Autocomplete=r,r.formatResult=function(e,s){return s?(e=t.highlight(e,s)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>"):e},r.prototype={killerFn:null,initialize:function(){var t,s,o=this,n="."+o.classes.suggestion,a=(o.classes.selected,o.options),i="."+a.closeTrigger;o.element.setAttribute("autocomplete","off"),o.killerFn=function(t){0===e(t.target).closest("."+o.options.containerClass).length&&0===e(t.target).closest("."+o.options.containerDetailsClass).length&&(o.killSuggestions(),o.disableKillerFn())};var l=o.el.closest("."+a.searchFormClass).data("wcas-context");o.noSuggestionsContainer=e('<div class="dgwt-wcas-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),o.suggestionsContainer=r.utils.createNode(a.containerClass),(t=e(o.suggestionsContainer)).attr("data-wcas-context",l),t.addClass("woocommerce"),t.appendTo("body"),!0===a.showImage&&t.addClass("dgwt-wcas-has-img"),!0===a.showPrice&&t.addClass("dgwt-wcas-has-price"),!0===a.showDescription&&t.addClass("dgwt-wcas-has-desc"),!0===a.showSKU&&t.addClass("dgwt-wcas-has-sku"),"auto"!==a.width&&t.width(a.width),!0===a.showDetailsPanel&&(o.detailsContainer=r.utils.createNode(a.containerDetailsClass),(s=e(o.detailsContainer)).attr("data-wcas-context",l),s.addClass("woocommerce"),s.appendTo("body")),t.on("mouseover.autocomplete",n,function(){o.onMouseOver(e(this).data("index")),o.activate(e(this).data("index"))}),t.on("mouseout.autocomplete",function(){}),e(document).on("click.autocomplete",i,function(t){o.killerFn(t),o.clear(!1),e(this).removeClass(a.closeTrigger),e(this).closest("."+a.searchFormClass).find("."+a.searchInputClass).val("").focus()}),t.on("click.autocomplete",n,function(){return o.select(e(this).data("index")),!1}),e(document).on("change",'[name="js-dgwt-wcas-quantity"]',function(t){e(this).closest(".js-dgwt-wcas-pd-addtc").find("[data-quantity]").attr("data-quantity",e(this).val())}),o.fixPositionCapture=function(){o.adjustContainerWidth(),o.visible&&o.fixPosition()},e(window).on("resize.autocomplete",o.fixPositionCapture),o.el.on("keydown.autocomplete",function(e){o.onKeyPress(e)}),o.el.on("keyup.autocomplete",function(e){o.onKeyUp(e)}),o.el.on("blur.autocomplete",function(){o.onBlur()}),o.el.on("focus.autocomplete",function(){o.onFocus()}),o.el.on("change.autocomplete",function(e){o.onKeyUp(e)}),o.el.on("input.autocomplete",function(e){o.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPositionCapture(),e.el.val().length>=e.options.minChars&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(t){var s=this,o=s.getSuggestionsContainer(),n=s.options;(e.extend(n,t),s.isLocal=e.isArray(n.lookup),s.isLocal&&(n.lookup=s.verifySuggestionsFormat(n.lookup)),n.orientation=s.validateOrientation(n.orientation,"bottom"),o.css({"max-height":s.canShowDetailsBox()?"none":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex}),!0===n.showDetailsPanel)&&(s.getDetailsContainer().css({"z-index":n.zIndex-1}),e("body").addClass("dgwt-wcas-is-details"));s.options.onSearchComplete=function(){s.preloader("hide","form","dgwt-wcas-inner-preloader"),s.preloader("show","form",n.closeTrigger)}},clearCache:function(){this.cachedResponse={},this.cachedDetails={},this.badQueries=[]},clear:function(e){e&&this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearInterval(e.onChangeInterval),e.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,s=e("."+t.options.containerClass+'[data-wcas-context="'+t.getContext()+'"]'),o=t.getFormOffset();s.css(o),t.canShowDetailsBox()&&t.fixPositionDetailsBox()},fixPositionDetailsBox:function(){var t=this,s=t.el.closest("[data-wcas-context]"),o=e("."+t.options.containerDetailsClass+'[data-wcas-context="'+t.getContext()+'"]'),n=e("."+t.options.containerClass+'[data-wcas-context="'+t.getContext()+'"]'),a=t.getFormOffset(),i=a.left;if(0==o.length)return!1;var l=!0===t.options.isRtl?1:2,r=Math.round(a.left);if(a.left=r+Math.round(n.width()+l),o.css(a),s.width()>=550)return e("body").removeClass("dgwt-wcas-details-outside"),e("body").removeClass("dgwt-wcas-details-right"),e("body").removeClass("dgwt-wcas-details-left"),void(!0===t.options.isRtl&&(n.css("left",r+Math.round(o.width()+l)+"px"),o.css("left",i+"px")));var c=e(window).width(),d=o.width(),u=o.offset();e("body").addClass("dgwt-wcas-details-outside"),!0===t.options.isRtl&&(a.left=a.left+1);var g=!1,h=!1;c<u.left+d&&(g=!0,e("body").removeClass("dgwt-wcas-details-right"),e("body").addClass("dgwt-wcas-details-left"),o.css("left",Math.round(parseFloat(n.css("left").replace("px","")))-o.outerWidth()+"px")),(u=o.offset()).left<1&&(h=!0,e("body").removeClass("dgwt-wcas-details-left"),e("body").addClass("dgwt-wcas-details-right")),h&&g?(e("body").removeClass("dgwt-wcas-details-left"),e("body").removeClass("dgwt-wcas-details-right"),e("body").addClass("dgwt-wcas-details-notfit")):e("body").removeClass("dgwt-wcas-details-notfit")},fixHeight:function(){var t=this.options;if(1!=t.showDetailsPanel)return!1;e("."+t.containerClass).css("height","auto"),e("."+t.containerDetailsClass).css("height","auto");var s=e("."+t.containerClass),o=e("."+t.containerDetailsClass),n=s.outerHeight(),a=o.outerHeight();return s.find(".dgwt-wcas-suggestion:last-child").removeClass("dgwt-wcas-suggestion-no-border-bottom"),!(n<=340&&a<=340)&&(s.find(".dgwt-wcas-suggestion:last-child").addClass("dgwt-wcas-suggestion-no-border-bottom"),a<n&&o.css("height",n+"px"),n<a&&s.css("height",a+"px"),!1)},getFormOffset:function(){var t=this,s=t.getFormWrapper(),o=t.getSuggestionsContainer(),n=t.options.orientation,a=s.outerHeight(),i=t.el.outerHeight(),l=t.el.offset(),r={top:l.top,left:l.left};if("auto"===n){var c=e(window).height(),d=e(window).scrollTop(),u=-d+l.top-a,g=d+c-(l.top+i+a);n=Math.max(u,g)===u?"top":"bottom"}if("top"===n){o[0].getBoundingClientRect().top;var h=s[0].getBoundingClientRect().top;o.css("height","auto"),h<o.height()&&o.height(h-10),r.top+=-o.outerHeight()}else r.top+=i;return r},getContext:function(){var e=this.el.closest("[data-wcas-context]"),t="";return e.length>0&&(t=e.data("wcas-context")),t},getFormWrapper:function(){return this.el.closest("[data-wcas-context]")},getSuggestionsContainer:function(){return e("."+this.options.containerClass+'[data-wcas-context="'+this.getContext()+'"]')},getDetailsContainer:function(){return e("."+this.options.containerDetailsClass+'[data-wcas-context="'+this.getContext()+'"]')},scrollDownSuggestions:function(){var e=this.getSuggestionsContainer();e[0].scrollTop=e[0].scrollHeight},enableKillerFn:function(){e(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){e(document).off("click.autocomplete",this.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.visible&&(e.options.preserveInput||e.el.val(e.currentValue),e.hide()),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this.el.val().length,s=this.element.selectionStart;return"number"==typeof s?s===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==l||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case s:t.el.val(t.currentValue),t.hide();break;case i:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case o:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case n:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case a:t.moveUp();break;case l:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case a:case l:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var t=this,s=t.options,o=t.el.val(),n=t.getQuery(o);t.selection&&t.currentValue!==n&&(t.selection=null,(s.onInvalidateSelection||e.noop).call(t.element)),clearInterval(t.onChangeInterval),t.currentValue=o,t.selectedIndex=-1,s.triggerSelectOnValidInput&&t.isExactMatch(n)?t.select(0):n.length<s.minChars?(e("."+t.options.closeTrigger).removeClass(t.options.closeTrigger),t.hide()):t.getSuggestions(n)},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},canShowDetailsBox:function(){return 1==this.options.showDetailsPanel&&e(window).width()>=992&&!("ontouchend"in document)},getQuery:function(t){var s,o=this.options.delimiter;return o?(s=t.split(o),e.trim(s[s.length-1])):t},getSuggestionsLocal:function(t){var s,o=this.options,n=t.toLowerCase(),a=o.lookupFilter,i=parseInt(o.lookupLimit,10);return s={suggestions:e.grep(o.lookup,function(e){return a(e,t,n)})},i&&s.suggestions.length>i&&(s.suggestions=s.suggestions.slice(0,i)),s},getSuggestions:function(t){var s,o,n,a,i=this,l=i.options,r=l.serviceUrl;l.params[l.paramName]=t,o=l.ignoreParams?null:l.params,i.preloader("show","form","dgwt-wcas-inner-preloader"),!1!==l.onSearchStart.call(i.element,l.params)&&(e.isFunction(l.lookup)?l.lookup(t,function(e){i.suggestions=e.suggestions,i.suggest(),i.getDetails(e.suggestions[0]),l.onSearchComplete.call(i.element,t,e.suggestions)}):(i.isLocal?s=i.getSuggestionsLocal(t):(e.isFunction(r)&&(r=r.call(i.element,t)),n=r+"?"+e.param(o||{}),s=i.cachedResponse[n]),s&&e.isArray(s.suggestions)?(i.suggestions=s.suggestions,i.suggest(),i.getDetails(s.suggestions[0]),l.onSearchComplete.call(i.element,t,s.suggestions)):i.isBadQuery(t)?l.onSearchComplete.call(i.element,t,[]):(i.abortAjax(),a={url:r,data:o,type:l.type,dataType:l.dataType},e.extend(a,l.ajaxSettings),i.currentRequest=e.ajax(a).done(function(e){var s;i.currentRequest=null,void 0!==(s=l.transformResult(e,t)).suggestions&&(i.processResponse(s,t,n),i.getDetails(s.suggestions[0])),i.fixPositionCapture(),l.onSearchComplete.call(i.element,t,s.suggestions)}).fail(function(e,s,o){l.onSearchError.call(i.element,t,e,s,o)}))))},getDetails:function(t){var s=this,o=s.options;if(!s.canShowDetailsBox())return!1;if(null!=t&&("string"!=typeof t.more_products||"more_products"!==t.more_products)){var n,a,i=e("."+o.containerDetailsClass);s.fixHeight();var l={action:dgwt_wcas.action_result_details,post_id:null!=t.post_id?t.post_id:0,term_id:null!=t.term_id?t.term_id:0,taxonomy:null!=t.taxonomy?t.taxonomy:"",value:null!=t.value?t.value:""};if(n=l.action+l.post_id+l.term_id+l.taxonomy,null!=(a=s.cachedDetails[n]))i.html(a.details),s.fixHeight(),s.fixPositionCapture();else{if(i.html(""),s.preloader("show","details","",!0),-1!=e.inArray(n,s.detailsRequestsSent))return;s.detailsRequestsSent.push(n),e.ajax({data:l,type:"post",url:dgwt_wcas.ajax_details_endpoint,success:function(e){var t="string"==typeof e?jQuery.parseJSON(e):e;s.cachedDetails[n]=t,s.preloader("hide","details","",!0),null!=t.details?i.html(t.details):i.html(""),s.fixPositionCapture(),s.fixHeight()},error:function(e,t){s.preloader("hide","details","",!0),i.html(e),s.fixPositionCapture(),s.fixHeight()}})}}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,s=t.length;s--;)if(0===e.indexOf(t[s]))return!0;return!1},hide:function(){var t=this,s=t.getSuggestionsContainer(),o=t.getDetailsContainer();e.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,container),t.visible=!1,t.selectedIndex=-1,clearInterval(t.onChangeInterval),s.hide(),s.removeClass(t.classes.suggestionsContainerOrientTop),o.hide(),e("body").removeClass("dgwt-wcas-open"),e("body").removeClass("dgwt-wcas-block-scroll"),t.signalHint(null)},suggest:function(){if(this.suggestions.length){var t,s=this,o=s.options,n=o.groupBy,a=o.formatResult,i=s.getQuery(s.currentValue),l=s.classes.suggestion,r=s.classes.selected,c=s.getSuggestionsContainer(),d=s.getDetailsContainer(),u=e(s.noSuggestionsContainer),g=o.beforeRender,h="";o.triggerSelectOnValidInput&&s.isExactMatch(i)?s.select(0):(e.each(s.suggestions,function(e,s){var r,c="",d=!1;if(n&&(h+=(r=s.data[n],t===r?"":'<div class="autocomplete-group"><strong>'+(t=r)+"</strong></div>")),void 0===s.post_id){var u=l,g="dgwt-wcas-st",p="",w="",f="";"product_cat"===s.taxonomy?(u+=" dgwt-wcas-suggestion-cat",p+='<span class="dgwt-wcas-st--tax">'+dgwt_wcas.t.category+"</span>",void 0!==s.breadcrumbs&&s.breadcrumbs&&(f=s.breadcrumbs+" &gt; "+s.value,w+='<span class="dgwt-wcas-st-breadcrumbs">'+dgwt_wcas.copy_in_category+" "+s.breadcrumbs+"</span>")):"product_tag"===s.taxonomy?(u+=" dgwt-wcas-suggestion-tag",p+='<span class="dgwt-wcas-st--tax">'+dgwt_wcas.t.tag+"</span>"):void 0!==s.type&&"more_products"===s.type?(u+=" js-dgwt-wcas-suggestion-more dgwt-wcas-suggestion-more",g="dgwt-wcas-st-more",s.value=dgwt_wcas.copy_show_more+" ("+s.total+")"):(u+=" dgwt-wcas-suggestion-nores",s.value=dgwt_wcas.copy_no_result),f=f.length>0?' title="'+f+'"':"",h+='<div class="'+u+'" data-index="'+e+'">',h+="<span"+f+' class="'+g+'">'+p+a(s.value,i)+w+"</span>",h+="</div>"}else!0===o.showImage&&void 0!==s.thumb_html&&(d=!0),c+=void 0!==s.post_id?'data-post-id="'+s.post_id+'" ':"",c+=void 0!==s.taxonomy?'data-taxonomy="'+s.taxonomy+'" ':"",c+=void 0!==s.term_id?'data-term-id="'+s.term_id+'" ':"",h+='<div class="'+l+' dgwt-wcas-suggestion-product" data-index="'+e+'" '+c+">",d&&(h+='<span class="dgwt-wcas-si">'+s.thumb_html+"</span>"),h+=d?'<div class="dgwt-wcas-content-wrapp">':"",h+='<span class="dgwt-wcas-st">',h+="<span>"+a(s.value,i)+"</span>",!0===o.showSKU&&void 0!==s.sku&&s.sku.length>0&&(h+='<span class="dgwt-wcas-sku">('+dgwt_wcas.t.sku_label+" "+a(s.sku,i)+")</span>"),h+="</span>",!0===o.showPrice&&void 0!==s.price&&(h+='<span class="dgwt-wcas-sp">'+s.price+"</span>"),!0===o.showDescription&&void 0!==s.desc&&s.desc&&(h+='<span class="dgwt-wcas-sd">'+a(s.desc,i)+"</span>"),!0===o.showFeaturedBadge&&!0===s.on_sale&&(h+='<span class="dgwt-wcas-badge dgwt-wcas-badge-os">'+o.saleBadgeText+"</span>"),!0===o.showFeaturedBadge&&!0===s.featured&&(h+='<span class="dgwt-wcas-badge dgwt-wcas-badge-f">'+o.featuredBadgeText+"</span>"),h+=d?"</div>":"",h+="</div>"}),this.adjustContainerWidth(),u.detach(),c.html(h),e.isFunction(g)&&g.call(s.element,c,s.suggestions),s.fixPositionCapture(),c.show(),e("body").addClass("dgwt-wcas-open"),!0===o.showDetailsPanel&&(d.show(),s.fixHeight()),o.autoSelectFirst&&(s.selectedIndex=0,c.scrollTop(0),c.children("."+l).first().addClass(r)),s.visible=!0,"top"===s.options.orientation&&(s.getSuggestionsContainer().addClass(s.classes.suggestionsContainerOrientTop),e("body").addClass("dgwt-wcas-block-scroll"),setTimeout(function(){s.scrollDownSuggestions()},300)),s.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var t=this.getSuggestionsContainer(),s=e(this.noSuggestionsContainer);s.detach(),t.empty(),t.append(s),this.fixPositionCapture(),t.show(),this.visible=!0},adjustContainerWidth:function(){var t,s=this,o=s.options,n=e("body"),a=s.getFormWrapper(),i=s.getSuggestionsContainer(),l=s.getDetailsContainer(),r=s.getFormOffset(),c=getComputedStyle(a[0]).width;if(c=Math.round(parseFloat(c.replace("px",""))),"auto"===o.width&&(t=s.el.outerWidth(),i.css("width",t+"px")),!0===o.showDetailsPanel){if(a.width()>=550)return n.addClass("dgwt-wcas-full-width"),c%2==0?(i.css("width",Math.round(c/2)),l.css("width",Math.round(c/2))):(i.css("width",Math.floor(c/2)),l.css("width",Math.ceil(c/2))),n.removeClass("dgwt-wcas-details-left"),n.removeClass("dgwt-wcas-details-right"),void(!0===o.isRtl?l.css("left","0"):i.css("left",c/2+r.left+"px"));n.addClass("dgwt-wcas-details-right")}},findBestHint:function(){var t=this.el.val().toLowerCase(),s=null;t&&(e.each(this.suggestions,function(e,o){var n=0===o.value.toLowerCase().indexOf(t);return n&&(s=o),!n}),this.signalHint(s))},signalHint:function(t){var s="",o=this;t&&(s=o.currentValue+t.value.substr(o.currentValue.length)),o.hintValue!==s&&(o.hintValue=s,o.hint=t,(this.options.onHint||e.noop)(s))},preloader:function(t,s,o,n){var a,i,l="dgwt-wcas-preloader-wrapp",r=null==o?l:l+" "+o;if("form"===s?i=this.getFormWrapper().find(".dgwt-wcas-preloader"):"details"===s&&(i=e(this.detailsContainer)),1==dgwt_wcas.show_preloader&&0!=i.length)if(!0===n)if("hide"!==t){if("show"===t){var c=this.options.isRtl?"-rtl":"";a='<div class="'+r+'"><img class="dgwt-wcas-placeholder-preloader" src="'+dgwt_wcas.img_url+"placeholder"+c+'.png" /></div>',i.html(a)}}else e(l).remove();else"hide"===t?i.removeClass(o):i.addClass(o)},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,function(e){return{value:e,data:null}}):t},validateOrientation:function(t,s){return t=e.trim(t||"").toLowerCase(),-1===e.inArray(t,["auto","bottom","top"])&&(t=s),t},processResponse:function(e,t,s){var o=this,n=o.options;e.suggestions=o.verifySuggestionsFormat(e.suggestions),n.noCache||(o.cachedResponse[s]=e,n.preventBadQueries&&!e.suggestions.length&&o.badQueries.push(t)),t===o.getQuery(o.currentValue)&&("top"===o.options.orientation&&e.suggestions.reverse(),o.suggestions=e.suggestions,o.suggest())},activate:function(t){var s,o=this,n=o.classes.selected,a=o.getSuggestionsContainer(),i=a.find("."+o.classes.suggestion);return a.find("."+n).removeClass(n),o.selectedIndex=t,-1!==o.selectedIndex&&i.length>o.selectedIndex?(s=i.get(o.selectedIndex),e(s).addClass(n),s):null},selectHint:function(){var t=e.inArray(this.hint,this.suggestions);this.select(t)},select:function(e){this.hide(),this.onSelect(e),this.disableKillerFn()},moveUp:function(){var e=this;if(-1!==e.selectedIndex)return 0===e.selectedIndex?(e.getSuggestionsContainer().children().first().removeClass(e.classes.selected),e.selectedIndex=-1,e.el.val(e.currentValue),void e.findBestHint()):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(t){var s=this,o=s.activate(t);if(o&&!s.canShowDetailsBox()){var n,a,i,l=s.getSuggestionsContainer(),r=e(o).outerHeight();n=o.offsetTop,i=(a=l.scrollTop())+s.options.maxHeight-r,n<a?l.scrollTop(n):n>i&&l.scrollTop(n-s.options.maxHeight+r),s.options.preserveInput||s.el.val(s.getValue(s.suggestions[t].value)),s.signalHint(null)}},onSelect:function(t){var s=this,o=s.options.onSelect,n=s.suggestions[t];void 0===n.type||"more_products"!==n.type?(s.currentValue=s.getValue(n.value),s.currentValue===s.el.val()||s.options.preserveInput||s.el.val(s.currentValue),n.url.length>0&&(window.location.href=n.url),s.signalHint(null),s.suggestions=[],s.selection=n,e.isFunction(o)&&o.call(s.element,n)):s.el.closest("form").trigger("submit")},onMouseOver:function(t){var s=this,o=s.options.onMouseOver,n=s.suggestions[t];s.selectedIndex!==t&&s.getDetails(n),e.isFunction(o)&&o.call(s.element,n)},onMouseLeave:function(t){var s=this.options.onMouseLeave,o=this.suggestions[t];e.isFunction(s)&&s.call(this.element,o)},getValue:function(e){var t,s,o=this.options.delimiter;return o?1===(s=(t=this.currentValue).split(o)).length?e:t.substr(0,t.length-s[s.length-1].length)+e:e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),t.disableKillerFn(),e(window).off("resize.autocomplete",t.fixPositionCapture),e("."+t.options.containerClass).remove(),e("."+t.options.containerDetailsClass).remove()}},e.fn.dgwtWcasAutocomplete=function(t,s){var o="autocomplete";return arguments.length?this.each(function(){var n=e(this),a=n.data(o);"string"==typeof t?a&&"function"==typeof a[t]&&a[t](s):(a&&a.dispose&&a.dispose(),a=new r(this,t),n.data(o,a))}):this.first().data(o)},e(window).on("load",function(){e(".dgwt-wcas-search-submit").length>0&&e(".dgwt-wcas-search-submit").each(function(){var t=e(this).closest(".dgwt-wcas-search-wrapp").find(".dgwt-wcas-preloader");1==dgwt_wcas.isRtl?t.css("left",6+e(this).outerWidth()+"px"):t.css("right",e(this).outerWidth()+"px")})}),e(document).ready(function(){var t=1==dgwt_wcas.show_details_box;(jQuery(window).width()<992||"ontouchend"in document)&&(t=!1),e(".dgwt-wcas-search-input").dgwtWcasAutocomplete({minChars:dgwt_wcas.min_chars,width:dgwt_wcas.sug_width,autoSelectFirst:!1,triggerSelectOnValidInput:!1,serviceUrl:dgwt_wcas.ajax_search_endpoint,paramName:"s",showDetailsPanel:t,showImage:1==dgwt_wcas.show_images,showPrice:1==dgwt_wcas.show_price,showDescription:1==dgwt_wcas.show_desc,showSKU:1==dgwt_wcas.show_sku,showSaleBadge:1==dgwt_wcas.show_sale_badge,showFeaturedBadge:1==dgwt_wcas.show_featured_badge,saleBadgeText:dgwt_wcas.t.sale_badge,featuredBadgeText:dgwt_wcas.t.featured_badge,isRtl:1==dgwt_wcas.is_rtl,isPremium:1==dgwt_wcas.is_premium})}),e(window).on("load",function(){var t=e(".dgwt-wcas-search-wrapp[data-wcas-context]"),s=[];t.length>0&&t.each(function(){var t=e(this).attr("data-wcas-context");if(-1==e.inArray(t,s))s.push(t);else{var o=Math.random().toString(36).substring(2,6),n=e('.dgwt-wcas-suggestions-wrapp[data-wcas-context="'+t+'"]'),a=e('.dgwt-wcas-details-wrapp[data-wcas-context="'+t+'"]');e(this).attr("data-wcas-context",o),n.length>0&&e(n[n.length-1]).attr("data-wcas-context",o),a.length>0&&e(a[a.length-1]).attr("data-wcas-context",o)}})})});