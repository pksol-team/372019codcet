!function(t){"use strict";t(document).ready(function(){function i(i,s){i&&i.preventDefault();var d=tmWoowishlist.ajaxurl,l=t("div.tm-woocomerce-wishlist-widget-wrapper"),w=t("div.tm-woowishlist");s.isWishlistPage=!!w.length,s.isWidget=!!l.length,("tm_woowishlist_update"!==s.action||s.isWishlistPage||s.isWidget)&&(s.isWishlistPage&&(s.wishListData=JSON.stringify(w.data())),w.addClass(o),l.addClass(o),t.post(d,s,function(i){w.removeClass(o),l.removeClass(o),i.success&&(s.isWishlistPage&&t("div.tm-woowishlist-wrapper").html(i.data.wishList),s.isWidget&&l.html(i.data.widget),"tm_woowishlist_remove"===s.action&&(t(n+"[data-id="+s.pid+"]").removeClass(e).find(".text").text(tmWoowishlist.addText),t(n+"[data-id="+s.pid+"]").next(".tm-woowishlist-page-button").remove())),a()}))}function s(s){console.log(s);var a=t(s.currentTarget);i(s,{action:"tm_woowishlist_remove",pid:a.data("id"),nonce:a.data("nonce")})}function a(){t(".tm-woowishlist-remove").off("click").on("click",function(t){s(t)})}var o="loading",e="added in_wishlist",n="button.tm-woowishlist-button";a(),function(){t(document).on("click",n,function(s){var a=t(this);if(s.preventDefault(),!a.hasClass("in_wishlist")){var n=tmWoowishlist.ajaxurl,d={action:"tm_woowishlist_add",pid:a.data("id"),nonce:a.data("nonce"),single:a.hasClass("tm-woowishlist-button-single")};a.removeClass(e).addClass(o),t.post(n,d,function(t){a.removeClass(o),t.success&&(a.addClass(e).find(".text").text(tmWoowishlist.addedText),t.data.wishlistPageBtn&&a.after(t.data.wishlistPageBtn),i(null,{action:"tm_woowishlist_update"}))})}})}()})}(jQuery);